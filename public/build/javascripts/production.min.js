angular.module("userSingleApp",["ngRoute","ngTable"]).config(function(a){a.when("/",{templateUrl:"template/login.hbs",controller:"loginController"}).when("/users/edit",{templateUrl:"template/edit.hbs",controller:"editController"}).when("/users/signup",{templateUrl:"template/signup.hbs",controller:"signupController"}).when("/users/login",{templateUrl:"template/login.hbs",controller:"loginController"}).when("/users/userlist",{templateUrl:"template/userlist.hbs",controller:"userlistController"}).when("/users/forgotpwd",{templateUrl:"template/forgotpwd.hbs",controller:"forgotpwdController"}).when("/users/detail",{templateUrl:"template/detail.hbs",controller:"detailController"})}).controller("editController",["$scope",function(a){var b=this;a.pageclass="page-edit",b.message="编辑用户的个人信息"}]).controller("signupController",["$http","$location","$scope",function(a,b,c){var d=this;c.pageclass="page-signup",d.message="注册用户的个人信息",d.captchaUrl="/captcha",d.changeimg=function(){d.captchaUrl="/captcha?d="+Math.random()},d.signup=function(){a.post("/signup",d.user).then(function(a){return a.data.captchaErrorMsg?void(d.captchaErrorMsg=a.data.captchaErrorMsg):void b.path("/users/userlist")})}}]).controller("detailController",["$scope",function(a){var b=this;a.pageclass="page-detail",b.message="列出用户的个人信息",b.personCount=2,b.keyInfo={},b.mouseInfo={},b.keyStroke=function(a){b.keyInfo.keyCode=a.keyCode},b.mouseClick=function(a){b.mouseInfo.clientX=a.clientX,b.mouseInfo.clientY=a.clientY,b.mouseInfo.screenX=a.screenX,b.mouseInfo.screenY=a.screenY}}]).controller("userlistController",["$http","$scope","NgTableParams","$location",function(a,b,c,d){var e=this;b.pageclass="page-userlist",e.data=[],e.message="用户列表",a.get("/http-list").then(function(a){e.allUsers=a.data.users,e.tableParams=new c({},{dataset:e.allUsers})}),e.user={},e.edit=function(b){e.uid=b,e.user={gender:"女"},a.get("/get-user-by-uid?uid="+b).then(function(a){e.user=a.data.users[0]})},e.del=function(b){a.get("/del-uerlist?uid="+b).then(function(a){e.message=a.data.msg}),d.path("/users/userlist"),parent.location.reload()},e.update=function(b){e.user.uid=b,a.post("/userlist-update",e.user).then(function(a){e.message=a.data.msg}),parent.location.reload(),d.path("/users/userlist")}}]).controller("loginController",["$scope","$http",function(a,b){var c=this;a.pageclass="page-login",c.message="登录用户的个人信息",c.login=function(){b.post("/login",c.user).then(function(a){return c.returnClass="alert alert-success",0===a.data.users.length?(c.returnClass="alert alert-danger",void(c.messageFull="请检查你的用户名或密码是否正确！")):(c.uid=a.data.users[0]._id,void(c.messageFull="你的账户是："+a.data.users[0].name+" 你的Email是："+a.data.users[0].email))})}}]).controller("forgotpwdController",["$scope",function(a){var b=this;a.pageclass="page-forgotpwd",b.message="忘记密码个人信息处理"}]),angular.module("mainApp",["userSingleApp","ngAnimate"]),$(function(){$(window).scroll(function(){$(window).scrollTop()>=100?$(".back").fadeIn(500):$(".back").fadeOut(500)}),$(".back").click(function(){return $("html,body").animate({scrollTop:0},300),!1})});